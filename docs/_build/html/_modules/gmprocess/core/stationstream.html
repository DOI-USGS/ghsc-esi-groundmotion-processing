<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <meta name="generator" content="sphinx-3.4.0, furo 2020.12.28.beta22"/>
        <title>gmprocess.core.stationstream - gmprocess 1.0.4 documentation</title>
      <link rel="stylesheet" href="../../../_static/styles/furo.css?digest=d315feae89b83a5365ff3ccc3644a1018972e3a0">
    <link rel="stylesheet" href="../../../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" href="../../../_static/styles/furo-extensions.css?digest=26485485040e7aaf717c13fd0188a5ad2c2deb60">
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script defer="defer" src="../../../_static/jquery.js"></script>
    <script defer="defer" src="../../../_static/underscore.js"></script>
    <script defer="defer" src="../../../_static/doctools.js"></script>
    <script defer src="../../../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">gmprocess 1.0.4 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../_static/gmprocess_logo.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/index.html">Objective</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/index.html#motivation">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/index.html#target-use-cases">Target Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/workspace.html">Workspace</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started/running.html">Running the code</a></li>
</ul>
<p class="caption"><span class="caption-text">Processing Steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../processing-steps/reading.html">Reading data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../processing-steps/retrieve.html">Retrieving data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../processing-steps/windowing.html">Windowing data</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../processing-steps/index.html">Waveform processing</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../processing-steps/waveform-processing.html">Waveform Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../processing-steps/waveform-processing/initial-qc.html">Initial quality control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../processing-steps/waveform-processing/remove-response.html">Removing instrument response</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../processing-steps/waveform-processing/phase-pickers.html">Phase pickers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../processing-steps/waveform-processing/baseline-correction.html">Baseline correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../processing-steps/waveform-processing/filtering.html">Filtering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../processing-steps/data-units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../processing-steps/waveform-metrics.html">Waveform metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../processing-steps/station-metrics.html">Station metrics</a></li>
</ul>
<p class="caption"><span class="caption-text">Using gmprocess</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../gmprocess/gmprocess.html">The gmprocess command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gmprocess/reading.html">Reading data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gmprocess/waveform-processing.html">Waveform processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gmprocess/reports.html">Processing reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gmprocess/exporting.html">Exporting data</a></li>
</ul>
<p class="caption"><span class="caption-text">Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../utilities/gmworkspace.html">The gmworkspace command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../utilities/gmconvert.html">Converting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/matlab.html">Matlab utilities</a></li>
</ul>
<p class="caption"><span class="caption-text">Python Scripting</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../scripting/index.html">Data structures</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../scripting/data-structures.html">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scripting/data-structures/station-trace.html">StationTrace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scripting/data-structures/station-stream.html">StationStream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../scripting/data-structures/stream-collection.html">StreamCollection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripting/scripting.html">Writing Python scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripting/waveform-metrics.html">Waveform metrics</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/code-layout.html">Code layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/readers.html">Adding new data readers</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidoc/gmprocess.html">API</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidoc/gmprocess.core.html">gmprocess.core</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.core.stationstream.html">gmprocess.core.stationstream</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.core.stationtrace.html">gmprocess.core.stationtrace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.core.streamcollection.html">gmprocess.core.streamcollection</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidoc/gmprocess.io.html">gmprocess.io</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.io.catalog.html">gmprocess.io.catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.io.fetcher.html">gmprocess.io.fetcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.io.global_fetcher.html">gmprocess.io.global_fetcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.io.nga.html">gmprocess.io.nga</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.io.read.html">gmprocess.io.read</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.io.read_directory.html">gmprocess.io.read_directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.io.report.html">gmprocess.io.report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.io.seedname.html">gmprocess.io.seedname</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.io.stream.html">gmprocess.io.stream</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.io.utils.html">gmprocess.io.utils</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidoc/gmprocess.utils.html">gmprocess.utils</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.utils.args.html">gmprocess.utils.args</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.utils.config.html">gmprocess.utils.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.utils.event.html">gmprocess.utils.event</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.utils.exception.html">gmprocess.utils.exception</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.utils.logging.html">gmprocess.utils.logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.utils.models.html">gmprocess.utils.models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.utils.plot.html">gmprocess.utils.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.utils.tables.html">gmprocess.utils.tables</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.html">gmprocess.waveform_processing</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.adjust_highpass.html">gmprocess.waveform_processing.adjust_highpass</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.corner_frequencies.html">gmprocess.waveform_processing.corner_frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.fft.html">gmprocess.waveform_processing.fft</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.filtering.html">gmprocess.waveform_processing.filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.nn_quality_assurance.html">gmprocess.waveform_processing.nn_quality_assurance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.phase.html">gmprocess.waveform_processing.phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.pretesting.html">gmprocess.waveform_processing.pretesting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.processing.html">gmprocess.waveform_processing.processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.snr.html">gmprocess.waveform_processing.snr</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.spectrum.html">gmprocess.waveform_processing.spectrum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.windows.html">gmprocess.waveform_processing.windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../apidoc/gmprocess.waveform_processing.zero_crossings.html">gmprocess.waveform_processing.zero_crossings</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <h1>Source code for gmprocess.core.stationstream</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># stdlib imports</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># third party imports</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">obspy.core.stream</span> <span class="kn">import</span> <span class="n">Stream</span>
<span class="kn">from</span> <span class="nn">obspy.core.utcdatetime</span> <span class="kn">import</span> <span class="n">UTCDateTime</span>
<span class="kn">from</span> <span class="nn">obspy.core.inventory</span> <span class="kn">import</span> <span class="p">(</span><span class="n">Inventory</span><span class="p">,</span> <span class="n">Network</span><span class="p">,</span> <span class="n">Station</span><span class="p">,</span>
                                  <span class="n">Channel</span><span class="p">,</span> <span class="n">Site</span><span class="p">,</span> <span class="n">Equipment</span><span class="p">,</span> <span class="n">Comment</span><span class="p">,</span>
                                  <span class="n">Response</span><span class="p">,</span> <span class="n">InstrumentSensitivity</span><span class="p">)</span>
<span class="c1"># local imports</span>
<span class="kn">from</span> <span class="nn">.stationtrace</span> <span class="kn">import</span> <span class="n">StationTrace</span>
<span class="kn">from</span> <span class="nn">gmprocess.utils.exception</span> <span class="kn">import</span> <span class="n">GMProcessException</span>

<span class="n">UNITS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'acc'</span><span class="p">:</span> <span class="s1">'cm/s/s'</span><span class="p">,</span>
    <span class="s1">'vel'</span><span class="p">:</span> <span class="s1">'cm/s'</span>
<span class="p">}</span>
<span class="n">REVERSE_UNITS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'cm/s/s'</span><span class="p">:</span> <span class="s1">'acc'</span><span class="p">,</span>
    <span class="s1">'cm/s'</span><span class="p">:</span> <span class="s1">'vel'</span>
<span class="p">}</span>

<span class="c1"># Number of samples for Landzos interpolation.</span>
<span class="n">N_LANCZOS</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c1"># if we find places for these in the standard metadata,</span>
<span class="c1"># remove them from this list. Anything here will</span>
<span class="c1"># be extracted from the stats standard dictionary,</span>
<span class="c1"># combined with the format_specific dictionary,</span>
<span class="c1"># serialized to json and stored in the station description.</span>
<span class="n">UNUSED_STANDARD_PARAMS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'instrument_period'</span><span class="p">,</span>
    <span class="s1">'instrument_damping'</span><span class="p">,</span>
    <span class="s1">'process_time'</span><span class="p">,</span>
    <span class="s1">'process_level'</span><span class="p">,</span>
    <span class="s1">'structure_type'</span><span class="p">,</span>
    <span class="s1">'corner_frequency'</span><span class="p">,</span>
    <span class="s1">'source_file'</span><span class="p">,</span>
    <span class="s1">'source_format'</span>
<span class="p">]</span>


<div class="viewcode-block" id="StationStream"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream">[docs]</a><span class="k">class</span> <span class="nc">StationStream</span><span class="p">(</span><span class="n">Stream</span><span class="p">):</span>
    <span class="sd">"""The gmprocess subclass of ObsPy's Stream object.</span>

<span class="sd">    ObsPy provides a Stream object that serves as a container for zero-to-many</span>
<span class="sd">    Trace objects, and gmprocess subclasses the Stream object with the</span>
<span class="sd">    StationStream object, which contains StationTrace objects. It also provides</span>
<span class="sd">    facilities for extracting ObsPy inventory data structures, and provenance</span>
<span class="sd">    from the contained StationTrace objects.</span>

<span class="sd">    The StationStream class is meant for grouping Traces from the same</span>
<span class="sd">    "station". In practice, what this really means is usually all of the</span>
<span class="sd">    channels from one instrument, with the same start and end times. Thus,</span>
<span class="sd">    he StationStream object has a get_id method, which returns a string that</span>
<span class="sd">    consists of the network code, station code, and the first two characters</span>
<span class="sd">    of the channel code, since these should all be applicable to all traces in</span>
<span class="sd">    the StationStream object.</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">traces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inventory</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">StationStream</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">traces</span><span class="p">):</span>
            <span class="c1"># sometimes traces have different start/end times</span>
            <span class="c1"># let's get the minimum bounding times here</span>
            <span class="c1"># and trim the trace before we add it to the stream.</span>
            <span class="n">starts</span> <span class="o">=</span> <span class="p">[</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">starttime</span> <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">traces</span><span class="p">]</span>
            <span class="n">ends</span> <span class="o">=</span> <span class="p">[</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">endtime</span> <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">traces</span><span class="p">]</span>
            <span class="n">sts</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">timestamp</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">starts</span><span class="p">]</span>
            <span class="n">ets</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">timestamp</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">ends</span><span class="p">]</span>

            <span class="c1"># Do we need to try to fix the start/end times?</span>
            <span class="n">times_match</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">sts</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">ets</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">times_match</span><span class="p">:</span>
                <span class="n">newstart</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">starts</span><span class="p">)</span>
                <span class="n">newend</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ends</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">newstart</span> <span class="o">&gt;=</span> <span class="n">newend</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">traces</span><span class="p">:</span>
                        <span class="n">trace</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span>
                            <span class="s1">'Trimming start/end times across traces for '</span>
                            <span class="s1">'this stream resulting in a start time after '</span>
                            <span class="s1">'the end time.'</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># First try to simply cut, the most minimally invasive</span>
                    <span class="c1"># option</span>
                    <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">traces</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">inventory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="n">StationTrace</span><span class="p">):</span>
                                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                                    <span class="s1">'Input Traces to StationStream must be of '</span>
                                    <span class="s1">'subtype StationTrace unless an invenotry '</span>
                                    <span class="s1">'is also provided.'</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="n">StationTrace</span><span class="p">):</span>
                                <span class="n">trace</span> <span class="o">=</span> <span class="n">StationTrace</span><span class="p">(</span>
                                    <span class="n">data</span><span class="o">=</span><span class="n">trace</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                                    <span class="n">header</span><span class="o">=</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="p">,</span>
                                    <span class="n">inventory</span><span class="o">=</span><span class="n">inventory</span>
                                <span class="p">)</span>

                        <span class="c1"># Apply the new start/end times</span>
                        <span class="n">trace</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">starttime</span><span class="o">=</span><span class="n">newstart</span><span class="p">,</span>
                                            <span class="n">endtime</span><span class="o">=</span><span class="n">newend</span><span class="p">)</span>
                        <span class="n">trace</span><span class="o">.</span><span class="n">setProvenance</span><span class="p">(</span>
                            <span class="s1">'cut'</span><span class="p">,</span>
                            <span class="p">{</span>
                                <span class="s1">'new_start_time'</span><span class="p">:</span> <span class="n">newstart</span><span class="p">,</span>
                                <span class="s1">'new_end_time'</span><span class="p">:</span> <span class="n">newend</span>
                            <span class="p">}</span>
                        <span class="p">)</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>

                    <span class="c1"># Did that work?</span>
                    <span class="n">starts</span> <span class="o">=</span> <span class="p">[</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">starttime</span> <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="p">]</span>
                    <span class="n">sts</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">timestamp</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">starts</span><span class="p">]</span>
                    <span class="n">ends</span> <span class="o">=</span> <span class="p">[</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">endtime</span> <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="p">]</span>
                    <span class="n">ets</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">timestamp</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">ends</span><span class="p">]</span>
                    <span class="n">deltas</span> <span class="o">=</span> <span class="p">[</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">delta</span> <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="p">]</span>
                    <span class="n">new_delta</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">deltas</span><span class="p">)</span>
                    <span class="n">newstart</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">starts</span><span class="p">)</span>
                    <span class="n">newend</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ends</span><span class="p">)</span>
                    <span class="n">new_duration</span> <span class="o">=</span> <span class="n">newend</span> <span class="o">-</span> <span class="n">newstart</span>
                    <span class="n">new_npts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">new_duration</span> <span class="o">/</span> <span class="n">new_delta</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">success</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">sts</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">ets</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span>

                    <span class="c1"># If not, resample</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="p">:</span>
                            <span class="n">tr</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span>
                                <span class="n">sampling_rate</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="n">new_delta</span><span class="p">,</span>
                                <span class="n">method</span><span class="o">=</span><span class="s1">'lanczos'</span><span class="p">,</span>
                                <span class="n">starttime</span><span class="o">=</span><span class="n">newstart</span><span class="p">,</span>
                                <span class="n">npts</span><span class="o">=</span><span class="n">new_npts</span><span class="p">,</span>
                                <span class="n">a</span><span class="o">=</span><span class="n">N_LANCZOS</span><span class="p">)</span>
                            <span class="n">tr</span><span class="o">.</span><span class="n">setProvenance</span><span class="p">(</span>
                                <span class="s1">'interpolate'</span><span class="p">,</span>
                                <span class="p">{</span>
                                    <span class="s1">'interpolation_method'</span><span class="p">:</span> <span class="s1">'lanczos'</span><span class="p">,</span>
                                    <span class="s1">'new_number_of_samples'</span><span class="p">:</span> <span class="n">new_npts</span><span class="p">,</span>
                                    <span class="s1">'new_start_time'</span><span class="p">:</span> <span class="n">newstart</span><span class="p">,</span>
                                    <span class="s1">'a'</span><span class="p">:</span> <span class="n">N_LANCZOS</span>
                                <span class="p">}</span>
                            <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">traces</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">inventory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="n">StationTrace</span><span class="p">):</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                                <span class="s1">'Input Traces to StationStream must be of '</span>
                                <span class="s1">'subtype StationTrace unless an invenotry '</span>
                                <span class="s1">'is also provided.'</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="n">StationTrace</span><span class="p">):</span>
                            <span class="n">trace</span> <span class="o">=</span> <span class="n">StationTrace</span><span class="p">(</span>
                                <span class="n">data</span><span class="o">=</span><span class="n">trace</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                                <span class="n">header</span><span class="o">=</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="p">,</span>
                                <span class="n">inventory</span><span class="o">=</span><span class="n">inventory</span>
                            <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="StationStream.validate"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Validation checks for Traces within a StationStream."""</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Check that channel codes are unique_npts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__check_channels</span><span class="p">()</span>

        <span class="c1"># Check that id is consistent, and set id if it passes the check.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__check_id</span><span class="p">()</span>

        <span class="c1"># The ID check is the only one that raises an exception, the</span>
        <span class="c1"># rest of these label the stream as failed rather than raise</span>
        <span class="c1"># an exception.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__check_sample_rate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__check_npts</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__check_starts</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">__check_sample_rate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">unique_sampling_rates</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">tr</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">sampling_rate</span> <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_sampling_rates</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">tr</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">'StationStream traces have different sampling rates.'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__check_npts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">unique_npts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span> <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_npts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">tr</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">'StationStream traces have a different number '</span>
                        <span class="s1">'of points.'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__check_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">unique_starts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">tr</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">starttime</span><span class="o">.</span><span class="n">timestamp</span> <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_starts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">tr</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">'StationStream traces have different start '</span>
                        <span class="s1">'times.'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__check_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">all_codes</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">stats</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">stats</span>
                <span class="n">all_codes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="s2">"</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">network</span><span class="p">,</span> <span class="n">stats</span><span class="o">.</span><span class="n">station</span><span class="p">,</span> <span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">all_codes</span><span class="p">))</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_codes</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="n">tr</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">'Nonunique channel code in StationStream.'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__check_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Check that id is consistent, and set id if it passes the check.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span>
            <span class="n">id_str</span> <span class="o">=</span> <span class="p">(</span><span class="s2">"</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span>
                      <span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">network</span><span class="p">,</span> <span class="n">stats</span><span class="o">.</span><span class="n">station</span><span class="p">,</span> <span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]))</span>

            <span class="c1"># Check that the id would be the same for all traces</span>
            <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">stats</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">stats</span>
                <span class="n">test_str</span> <span class="o">=</span> <span class="p">(</span><span class="s2">"</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span>
                            <span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">network</span><span class="p">,</span> <span class="n">stats</span><span class="o">.</span><span class="n">station</span><span class="p">,</span> <span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]))</span>
                <span class="k">if</span> <span class="n">id_str</span> <span class="o">!=</span> <span class="n">test_str</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">'Inconsistent stream ID for different traces.'</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">id_str</span>

<div class="viewcode-block" id="StationStream.get_id"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream.get_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get the StationStream ID.</span>

<span class="sd">        This consists of the network, station, and first two characters of the</span>
<span class="sd">        channel (to indicate instrument type). This is currently consistent</span>
<span class="sd">        with how the channels are grouped and ignores the location code because</span>
<span class="sd">        it doesn't seem like it is defined in a consistent fashion.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span></div>

<div class="viewcode-block" id="StationStream.get_net_sta"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream.get_net_sta">[docs]</a>    <span class="k">def</span> <span class="nf">get_net_sta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get just the network and station compopnent of the ID."""</span>
        <span class="k">return</span> <span class="s1">'.'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span></div>

<div class="viewcode-block" id="StationStream.get_inst"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream.get_inst">[docs]</a>    <span class="k">def</span> <span class="nf">get_inst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get just the network and station compopnent of the ID."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">passed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Check the traces to see if any have failed any processing steps.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if no failures in Traces, False if there are.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_stream</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">num_horizontal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get the number of horizontal components in the StationStream."""</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">([</span><span class="n">tr</span> <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">tr</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">'Z'</span><span class="p">])</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extended</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">"""String summary of the StationStream.</span>

<span class="sd">        Args:</span>
<span class="sd">            extended (bool):</span>
<span class="sd">                Unused; kept for compatibility with ObsPy parent class.</span>
<span class="sd">            indent (int):</span>
<span class="sd">                Number of characters to indent.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="p">:</span>
            <span class="n">id_length</span> <span class="o">=</span> <span class="bp">self</span> <span class="ow">and</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tr</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">)</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">id_length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
            <span class="n">pass_str</span> <span class="o">=</span> <span class="s1">' (passed)'</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pass_str</span> <span class="o">=</span> <span class="s1">' (failed)'</span>
        <span class="n">ind_str</span> <span class="o">=</span> <span class="s1">' '</span> <span class="o">*</span> <span class="n">indent</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'</span><span class="si">%s</span><span class="s1"> StationTrace(s) in StationStream</span><span class="si">%s</span><span class="s1">:</span><span class="se">\n</span><span class="si">%s</span><span class="s1">'</span>
               <span class="o">%</span> <span class="p">(</span><span class="n">ind_str</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="p">)),</span> <span class="n">pass_str</span><span class="p">,</span> <span class="n">ind_str</span><span class="p">))</span>
        <span class="n">lc</span> <span class="o">=</span> <span class="p">[</span><span class="n">_i</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="n">id_length</span><span class="p">,</span> <span class="n">indent</span><span class="p">)</span> <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span> <span class="o">+</span> <span class="n">ind_str</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lc</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

<div class="viewcode-block" id="StationStream.setStreamParam"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream.setStreamParam">[docs]</a>    <span class="k">def</span> <span class="nf">setStreamParam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_id</span><span class="p">,</span> <span class="n">param_attributes</span><span class="p">):</span>
        <span class="sd">"""Add to the StationStreams's set of arbitrary metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            param_id (str):</span>
<span class="sd">                Key for parameters dictionary.</span>
<span class="sd">            param_attributes (dict or list):</span>
<span class="sd">                Parameters for the given key.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">param_attributes</span></div>

<div class="viewcode-block" id="StationStream.getStreamParamKeys"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream.getStreamParamKeys">[docs]</a>    <span class="k">def</span> <span class="nf">getStreamParamKeys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get a list of all available parameter keys.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: List of available parameter keys.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>

<div class="viewcode-block" id="StationStream.getStreamParam"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream.getStreamParam">[docs]</a>    <span class="k">def</span> <span class="nf">getStreamParam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_id</span><span class="p">):</span>
        <span class="sd">"""Retrieve some arbitrary metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            param_id (str):</span>
<span class="sd">                Key for parameters dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict or list:</span>
<span class="sd">                Parameters for the given key.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">param_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
                <span class="s1">'Parameter </span><span class="si">%s</span><span class="s1"> not found in StationStream'</span> <span class="o">%</span> <span class="n">param_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span></div>

<div class="viewcode-block" id="StationStream.getProvenanceDocuments"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream.getProvenanceDocuments">[docs]</a>    <span class="k">def</span> <span class="nf">getProvenanceDocuments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_prov</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""Generate provenance Document.</span>

<span class="sd">        Args:</span>
<span class="sd">            base_prov:</span>
<span class="sd">                Base provenance document.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Provenance document.</span>
<span class="sd">        """</span>
        <span class="n">provdocs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="p">:</span>
            <span class="n">provdoc</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">getProvenanceDocument</span><span class="p">(</span><span class="n">base_prov</span><span class="p">)</span>
            <span class="n">provdocs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">provdoc</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">provdocs</span></div>

<div class="viewcode-block" id="StationStream.getInventory"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream.getInventory">[docs]</a>    <span class="k">def</span> <span class="nf">getInventory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Extract an ObsPy inventory object from a StationStream."""</span>
        <span class="n">networks</span> <span class="o">=</span> <span class="p">[</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">network</span> <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">networks</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">"Input stream has stations from multiple networks."</span><span class="p">)</span>

        <span class="c1"># We'll first create all the various objects. These strongly follow the</span>
        <span class="c1"># hierarchy of StationXML files.</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">''</span>
        <span class="k">if</span> <span class="s1">'standard'</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span> <span class="ow">and</span> <span class="s1">'source'</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="o">.</span><span class="n">source</span>
        <span class="n">inv</span> <span class="o">=</span> <span class="n">Inventory</span><span class="p">(</span>
            <span class="c1"># We'll add networks later.</span>
            <span class="n">networks</span><span class="o">=</span><span class="p">[],</span>
            <span class="c1"># The source should be the id whoever create the file.</span>
            <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

        <span class="n">net</span> <span class="o">=</span> <span class="n">Network</span><span class="p">(</span>
            <span class="c1"># This is the network code according to the SEED standard.</span>
            <span class="n">code</span><span class="o">=</span><span class="n">networks</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="c1"># A list of stations. We'll add one later.</span>
            <span class="n">stations</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">"source"</span><span class="p">,</span>
            <span class="c1"># Start-and end dates are optional.</span>
        <span class="p">)</span>
        <span class="n">channels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'trace: </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">trace</span><span class="p">)</span>
            <span class="n">channel</span> <span class="o">=</span> <span class="n">_channel_from_stats</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="p">)</span>
            <span class="n">channels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>

        <span class="n">subdict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">UNUSED_STANDARD_PARAMS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="p">:</span>
                <span class="n">subdict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

        <span class="n">format_specific</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="s1">'format_specific'</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="p">:</span>
            <span class="n">format_specific</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">format_specific</span><span class="p">)</span>

        <span class="n">big_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'standard'</span><span class="p">:</span> <span class="n">subdict</span><span class="p">,</span>
            <span class="s1">'format_specific'</span><span class="p">:</span> <span class="n">format_specific</span>
        <span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">jsonstr</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">big_dict</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GMProcessException</span><span class="p">(</span><span class="s1">'Exception in json.dumps: </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">e</span><span class="p">)</span>
        <span class="n">sta</span> <span class="o">=</span> <span class="n">Station</span><span class="p">(</span>
            <span class="c1"># This is the station code according to the SEED standard.</span>
            <span class="n">code</span><span class="o">=</span><span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">station</span><span class="p">,</span>
            <span class="n">latitude</span><span class="o">=</span><span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span>
            <span class="n">elevation</span><span class="o">=</span><span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">elevation</span><span class="p">,</span>
            <span class="n">longitude</span><span class="o">=</span><span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">longitude</span><span class="p">,</span>
            <span class="n">channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
            <span class="n">site</span><span class="o">=</span><span class="n">Site</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="o">.</span><span class="n">station_name</span><span class="p">),</span>
            <span class="n">description</span><span class="o">=</span><span class="n">jsonstr</span><span class="p">,</span>
            <span class="n">creation_date</span><span class="o">=</span><span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># this is bogus</span>
            <span class="n">total_number_of_channels</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="n">net</span><span class="o">.</span><span class="n">stations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sta</span><span class="p">)</span>
        <span class="n">inv</span><span class="o">.</span><span class="n">networks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">inv</span></div>

<div class="viewcode-block" id="StationStream.check_stream"><a class="viewcode-back" href="../../../apidoc/gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream.check_stream">[docs]</a>    <span class="k">def</span> <span class="nf">check_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Check StationStream for being flagged as failed.</span>

<span class="sd">        Processing checks get regorded as a 'failure' parameter in</span>
<span class="sd">        StationTraces. Streams also need to be classified as passed/faild,</span>
<span class="sd">        where if any of the checks have failed for consistent traces then the</span>
<span class="sd">        stream has failed.</span>
<span class="sd">        """</span>
        <span class="n">stream_checks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">stream_checks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tr</span><span class="o">.</span><span class="n">hasParameter</span><span class="p">(</span><span class="s1">'failure'</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">stream_checks</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span></div></div>


<span class="k">def</span> <span class="nf">_channel_from_stats</span><span class="p">(</span><span class="n">stats</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="o">.</span><span class="n">units</span> <span class="ow">in</span> <span class="n">UNITS</span><span class="p">:</span>
        <span class="n">units</span> <span class="o">=</span> <span class="n">UNITS</span><span class="p">[</span><span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="o">.</span><span class="n">units</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">units</span> <span class="o">=</span> <span class="s1">''</span>
    <span class="n">instrument</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="o">.</span><span class="n">instrument</span>
    <span class="n">serialnum</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="o">.</span><span class="n">sensor_serial_number</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">serialnum</span><span class="p">):</span>
        <span class="n">equipment</span> <span class="o">=</span> <span class="n">Equipment</span><span class="p">(</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">instrument</span><span class="p">,</span> <span class="n">serial_number</span><span class="o">=</span><span class="n">serialnum</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">equipment</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">azimuth</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">c1</span> <span class="o">=</span> <span class="s1">'horizontal_orientation'</span> <span class="ow">in</span> <span class="n">stats</span><span class="o">.</span><span class="n">standard</span>
    <span class="n">c2</span> <span class="o">=</span> <span class="n">c1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="o">.</span><span class="n">horizontal_orientation</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">c2</span><span class="p">:</span>
        <span class="n">azimuth</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="o">.</span><span class="n">horizontal_orientation</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">azimuth</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">azimuth</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">azimuth</span> <span class="o">&lt;=</span> <span class="mi">360</span><span class="p">):</span>
        <span class="n">azimuth</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">response</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s1">'response'</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="s1">'response'</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># we may have instrument sensitivity...</span>
        <span class="n">frequency</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">stats</span><span class="p">[</span><span class="s1">'standard'</span><span class="p">][</span><span class="s1">'instrument_period'</span><span class="p">]</span>
        <span class="n">units</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="o">.</span><span class="n">units</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">stats</span><span class="p">[</span><span class="s1">'standard'</span><span class="p">][</span><span class="s1">'instrument_sensitivity'</span><span class="p">]):</span>
            <span class="n">sens</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="s1">'standard'</span><span class="p">][</span><span class="s1">'instrument_sensitivity'</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sens</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">sensitivity</span> <span class="o">=</span> <span class="n">InstrumentSensitivity</span><span class="p">(</span>
            <span class="n">sens</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="n">frequency</span><span class="p">,</span> <span class="n">input_units</span><span class="o">=</span><span class="n">units</span><span class="p">,</span>
            <span class="n">output_units</span><span class="o">=</span><span class="s1">'COUNTS'</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span><span class="n">instrument_sensitivity</span><span class="o">=</span><span class="n">sensitivity</span><span class="p">)</span>

    <span class="n">comments</span> <span class="o">=</span> <span class="n">Comment</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">standard</span><span class="o">.</span><span class="n">comments</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'channel: </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">)</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">Channel</span><span class="p">(</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">,</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="s1">'latitude'</span><span class="p">],</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="s1">'longitude'</span><span class="p">],</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="s1">'elevation'</span><span class="p">],</span>
        <span class="n">depth</span><span class="p">,</span>
        <span class="n">azimuth</span><span class="o">=</span><span class="n">azimuth</span><span class="p">,</span>
        <span class="n">sample_rate</span><span class="o">=</span><span class="n">stats</span><span class="o">.</span><span class="n">sampling_rate</span><span class="p">,</span>
        <span class="n">calibration_units</span><span class="o">=</span><span class="n">units</span><span class="p">,</span>
        <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">],</span>
        <span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">,</span>
        <span class="n">sensor</span><span class="o">=</span><span class="n">equipment</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">channel</span>
</pre></div>
      </article>
      <footer>
        
        <div class="related-pages">
          
          
        </div>

        <div class="related-information">
              Copyright &#169; Public Domain
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </main>
</div>
  </body>
</html>