<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Installation" href="../getting-started/install.html" /><link rel="prev" title="Features" href="features.html" />

    <meta name="generator" content="sphinx-3.4.0, furo 2020.12.28.beta22"/>
        <title>Workspace - gmprocess 1.0.4 documentation</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=d315feae89b83a5365ff3ccc3644a1018972e3a0">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=26485485040e7aaf717c13fd0188a5ad2c2deb60">
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script defer="defer" src="../_static/jquery.js"></script>
    <script defer="defer" src="../_static/underscore.js"></script>
    <script defer="defer" src="../_static/doctools.js"></script>
    <script defer src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<div class="announcement">
  <aside class="announcement-content">
     <a href='https://github.com/usgs/groundmotion-processing' style='text-decoration: none'><h1>Ground-motion Processing Software</h1></a> 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">gmprocess 1.0.4 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/gmprocess_logo.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Overview</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Objective</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#motivation">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#target-use-cases">Target Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Workspace</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/running.html">Running the code</a></li>
</ul>
<p class="caption"><span class="caption-text">Processing Steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/reading.html">Reading data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/retrieve.html">Retrieving data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/windowing.html">Windowing data</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../processing-steps/index.html">Waveform processing</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing.html">Waveform Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing/initial-qc.html">Initial quality control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing/remove-response.html">Removing instrument response</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing/phase-pickers.html">Phase pickers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing/baseline-correction.html">Baseline correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing/filtering.html">Filtering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/data-units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/waveform-metrics.html">Waveform metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/station-metrics.html">Station metrics</a></li>
</ul>
<p class="caption"><span class="caption-text">Using gmprocess</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gmprocess/gmprocess.html">The gmprocess command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gmprocess/reading.html">Reading data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gmprocess/waveform-processing.html">Waveform processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gmprocess/reports.html">Processing reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gmprocess/exporting.html">Exporting data</a></li>
</ul>
<p class="caption"><span class="caption-text">Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../utilities/gmworkspace.html">The gmworkspace command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/gmconvert.html">Converting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/matlab.html">Matlab utilities</a></li>
</ul>
<p class="caption"><span class="caption-text">Python Scripting</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../scripting/index.html">Data structures</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../scripting/data-structures.html">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripting/data-structures/station-trace.html">StationTrace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripting/data-structures/station-stream.html">StationStream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripting/data-structures/stream-collection.html">StreamCollection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/scripting.html">Writing Python scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/waveform-metrics.html">Waveform metrics</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer/code-layout.html">Code layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/readers.html">Adding new data readers</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../apidoc/gmprocess.html">API</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../apidoc/gmprocess.core.html">gmprocess.core</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.core.stationstream.html">gmprocess.core.stationstream</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.core.stationtrace.html">gmprocess.core.stationtrace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.core.streamcollection.html">gmprocess.core.streamcollection</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../apidoc/gmprocess.io.html">gmprocess.io</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.io.catalog.html">gmprocess.io.catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.io.fetcher.html">gmprocess.io.fetcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.io.global_fetcher.html">gmprocess.io.global_fetcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.io.nga.html">gmprocess.io.nga</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.io.read.html">gmprocess.io.read</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.io.read_directory.html">gmprocess.io.read_directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.io.report.html">gmprocess.io.report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.io.seedname.html">gmprocess.io.seedname</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.io.stream.html">gmprocess.io.stream</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.io.utils.html">gmprocess.io.utils</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../apidoc/gmprocess.utils.html">gmprocess.utils</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.utils.args.html">gmprocess.utils.args</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.utils.config.html">gmprocess.utils.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.utils.event.html">gmprocess.utils.event</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.utils.exception.html">gmprocess.utils.exception</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.utils.logging.html">gmprocess.utils.logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.utils.models.html">gmprocess.utils.models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.utils.plot.html">gmprocess.utils.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.utils.tables.html">gmprocess.utils.tables</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.html">gmprocess.waveform_processing</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.adjust_highpass.html">gmprocess.waveform_processing.adjust_highpass</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.corner_frequencies.html">gmprocess.waveform_processing.corner_frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.fft.html">gmprocess.waveform_processing.fft</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.filtering.html">gmprocess.waveform_processing.filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.nn_quality_assurance.html">gmprocess.waveform_processing.nn_quality_assurance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.phase.html">gmprocess.waveform_processing.phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.pretesting.html">gmprocess.waveform_processing.pretesting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.processing.html">gmprocess.waveform_processing.processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.snr.html">gmprocess.waveform_processing.snr</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.spectrum.html">gmprocess.waveform_processing.spectrum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.windows.html">gmprocess.waveform_processing.windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apidoc/gmprocess.waveform_processing.zero_crossings.html">gmprocess.waveform_processing.zero_crossings</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="workspace">
<h1>Workspace<a class="headerlink" href="#workspace" title="Permalink to this headline">¶</a></h1>
<p>We use the term “workspace” to refer to the HDF file that serves as a
container to hold the inputs, important intermediate results, and
outputs. It also includes provenance information describing the processing
steps performed on the data.</p>
<p>The <a class="reference external" href="https://academic.oup.com/gji/article/207/2/1003/2583765">ASDF</a>
HDF-5 layout includes specifications for earthquake information,
station metadata, and waveform time histories. We include information
not explicitly covered in the ASDF format specification in the
<code class="docutils literal notranslate"><span class="pre">AuxiliaryData</span></code> group.</p>
<div class="section" id="nomenclature">
<h2>Nomenclature<a class="headerlink" href="#nomenclature" title="Permalink to this headline">¶</a></h2>
<p>For many of the groups and datasets in the HDF file, we form the names
by concatenating station information, such as network code, station
code, location code, channel code, and event id. Additionally, ASDF
supports tags for differentiating <code class="docutils literal notranslate"><span class="pre">Waveforms</span></code> and <code class="docutils literal notranslate"><span class="pre">AuxiliaryData</span></code>. In
our extension of the ASDF layout, we create the tags based on the
station and event information along with a user-specified label. In
the following sections, we use the following variables (denoted by
italics) in the group and dataset names:</p>
<ul class="simple">
<li><p><em><strong>NET</strong></em>: FDSN network code (or equivalent);</p></li>
<li><p><em><strong>STA</strong></em>: Station code;</p></li>
<li><p><em><strong>LOC</strong></em>: Location code;</p></li>
<li><p><em><strong>CHA</strong></em>: SEED channel code (or equivalent);</p></li>
<li><p><em><strong>INST</strong></em>: First two letters of the channel code (dropping the third letter which corresponds to the component);</p></li>
<li><p><em><strong>START__END</strong></em>: Channel start and end timestamps for <code class="docutils literal notranslate"><span class="pre">Waveforms</span></code>;</p></li>
<li><p><em><strong>LABEL</strong></em>: User-specified label that uniquely identifies processing parameters; and</p></li>
<li><p><em><strong>EVENTID</strong></em>: ComCat event id (or equivalent)</p></li>
</ul>
</div>
<div class="section" id="extension-of-asdf-hdf-5-layout">
<h2>Extension of ASDF HDF-5 Layout<a class="headerlink" href="#extension-of-asdf-hdf-5-layout" title="Permalink to this headline">¶</a></h2>
<p>We add several additional groups to the <code class="docutils literal notranslate"><span class="pre">AuxiliaryData</span></code> section:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">WaveformMetrics</span></code> for ground-motion intensity metrics, such as peak
values, response spectra, and Fourier amplitude spectra.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StationMetrics</span></code> for event station information, such as epicentral
distance and rupture distance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TraceProcessingParameters</span></code> for parameters associated with the
waveform trace processing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StreamProcessingParameters</span></code> for parameters associated with
processing the channels for a station.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Cache</span></code> for derived values that are not standard products and require
significant processing to compute, such as noise and signal spectra,
including smoothed signal spectra.</p></li>
<li><p>(Potential future addition) <code class="docutils literal notranslate"><span class="pre">SurfaceWaveforms</span></code> for waveform time histories
on a surface.</p></li>
<li><p>(Potential future addition) <code class="docutils literal notranslate"><span class="pre">RuptureModels</span></code> for finite-fault earthquake
rupture models.</p></li>
</ul>
<p><img alt="Diagram of group and dataset hierarchy in extension of the ASDF HDF-5 layout." src="../_images/asdf_layout.png"/></p>
<!-- <figure>
  <img src="./asdf_layout.png" alt="ASDF layout"/>
</figure> --><div class="section" id="waveform-metrics">
<h3>Waveform Metrics<a class="headerlink" href="#waveform-metrics" title="Permalink to this headline">¶</a></h3>
<p>Waveform metrics are quantities derived from the waveform time
histories, such as peak values (maximum absolute values), duration,
response spectra, and Fourier amplitude spectra. Although in some
cases they may be associated with a single channel (for example,
maximum absolute value) they are often a scalar value associated with
multiple channels (for example, RotD50 from the channels with the
horizontal components).</p>
<div class="section" id="waveform-metrics-hierarchy">
<h4>Waveform Metrics Hierarchy<a class="headerlink" href="#waveform-metrics-hierarchy" title="Permalink to this headline">¶</a></h4>
<p>Following the ASDF layout for waveforms and station metadata, the
hierarchy is</p>
<p><code class="docutils literal notranslate"><span class="pre">WaveformMetrics</span></code> (group) -&gt; <em>NET.STA</em> (group)
-&gt; <em>NET.STA.LOC.INST_EVENTID_LABEL</em> (dataset)</p>
<p>We use the instrument code (first two letters of the channel code)
rather than the full channel code, because many metrics involve
multiple channels (horizontal components). The components are included
in the metrics as attributes as necessary.</p>
<p>The dataset is a byte string corresponding to XML, similar to the
<code class="docutils literal notranslate"><span class="pre">QuakeML</span></code> and <code class="docutils literal notranslate"><span class="pre">StationXML</span></code> datasets.</p>
<p>The XML hierarchy follows the ShakeMap convention of intensity metric
followed by intensity metric type (<code class="docutils literal notranslate"><span class="pre">waveform_metrics</span></code> -&gt; <em>IM</em> -&gt; <em>IMT</em>).</p>
<ul class="simple">
<li><p><strong>IM</strong>: Intensity metric (peak ground acceleration, peak ground
velocity, response spectra, Fourier amplitude spectra)</p></li>
<li><p><strong>IMT</strong>: Intensity metric type (maximum component, geometric mean,
RotD50, etc)</p></li>
</ul>
<p>Sample XML for a waveform metrics dataset:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;waveform_metrics&gt;</span>
    <span class="nt">&lt;pga&gt;</span>
        <span class="nt">&lt;rot_d50</span> <span class="na">units=</span><span class="s">"m/s**2"</span><span class="nt">&gt;</span>0.45<span class="nt">&lt;/rot_d50&gt;</span>
        <span class="nt">&lt;maximum_component</span> <span class="na">units=</span><span class="s">"m/s**2"</span><span class="nt">&gt;</span>0.23<span class="nt">&lt;/maximum_component&gt;</span>
        <span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">"east"</span> <span class="na">units=</span><span class="s">"m/s**2"</span><span class="nt">&gt;</span>0.23<span class="nt">&lt;/component&gt;</span>
        <span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">"up"</span> <span class="na">units=</span><span class="s">"m/s**2"</span><span class="nt">&gt;</span>0.11<span class="nt">&lt;/component&gt;</span>
    <span class="nt">&lt;/pga&gt;</span>
    <span class="nt">&lt;sa</span> <span class="na">percent_damping=</span><span class="s">"5.0"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;rot_d50</span> <span class="na">units=</span><span class="s">"g"</span><span class="nt">&gt;</span>
	        <span class="nt">&lt;value</span> <span class="na">period=</span><span class="s">"3.0"</span><span class="nt">&gt;</span>0.2<span class="nt">&lt;/value&gt;</span>
	        <span class="nt">&lt;value</span> <span class="na">period=</span><span class="s">"1.0"</span><span class="nt">&gt;</span>0.6<span class="nt">&lt;/value&gt;</span>
	        <span class="nt">&lt;value</span> <span class="na">period=</span><span class="s">"0.3"</span><span class="nt">&gt;</span>0.3<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/rot_d50&gt;</span>
    <span class="nt">&lt;/sa&gt;</span>
    <span class="nt">&lt;pgv&gt;</span>
        <span class="nt">&lt;maximum_component</span> <span class="na">units=</span><span class="s">"m/s"</span><span class="nt">&gt;</span>0.012<span class="nt">&lt;/maximum_component&gt;</span>
        <span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">"east"</span> <span class="na">units=</span><span class="s">"m/s"</span><span class="nt">&gt;</span>0.012<span class="nt">&lt;/component&gt;</span>
        <span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">"up"</span> <span class="na">units=</span><span class="s">"m/s"</span><span class="nt">&gt;</span>0.008<span class="nt">&lt;/component&gt;</span>
    <span class="nt">&lt;/pgv&gt;</span>
<span class="nt">&lt;/waveform_metrics&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="station-metrics">
<h3>Station Metrics<a class="headerlink" href="#station-metrics" title="Permalink to this headline">¶</a></h3>
<p>Station metrics are quantities that depend on the earthquake rupture
and station, such as epicentral distance, hypocentral distance,
Joyner-Boore distance, and closest distance to the rupture surface.</p>
<div class="section" id="station-metrics-hierarchy">
<h4>Station Metrics Hierarchy<a class="headerlink" href="#station-metrics-hierarchy" title="Permalink to this headline">¶</a></h4>
<p>Following the ASDF layout for waveforms and station metadata, the
hierarchy is</p>
<p><code class="docutils literal notranslate"><span class="pre">StationMetrics</span></code> (group) -&gt; <em>NET.STA</em> (group)
-&gt; <em>NET.STA.LOC.INST_EVENTID</em> (dataset)</p>
<p>The dataset is a byte string corresponding to XML, similar to the
<code class="docutils literal notranslate"><span class="pre">QuakeML</span></code> and <code class="docutils literal notranslate"><span class="pre">StationXML</span></code> datasets.</p>
<p>Sample XML for a station metrics dataset:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;station_metrics&gt;</span>
  <span class="nt">&lt;hypocentral_distance</span> <span class="na">units=</span><span class="s">"km"</span><span class="nt">&gt;</span>10.2<span class="nt">&lt;/hypocentral_distance&gt;</span>
  <span class="nt">&lt;epicentral_distance</span> <span class="na">units=</span><span class="s">"km"</span><span class="nt">&gt;</span>2.3<span class="nt">&lt;/epicentral_distance&gt;</span>
<span class="nt">&lt;/station_metrics&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="trace-processing-parameters">
<h3>Trace Processing Parameters<a class="headerlink" href="#trace-processing-parameters" title="Permalink to this headline">¶</a></h3>
<p>Trace processing parameters are the parameters for the algorithms used
to process the individual waveform traces. This information is
primarily intended for reproducibility.</p>
<div class="section" id="trace-processing-parameters-hierarchy">
<h4>Trace Processing Parameters Hierarchy<a class="headerlink" href="#trace-processing-parameters-hierarchy" title="Permalink to this headline">¶</a></h4>
<p>Following the ASDF layout for waveforms, the
hierarchy is</p>
<p><code class="docutils literal notranslate"><span class="pre">TraceProcessingParameters</span></code> (group) -&gt; <em>NET.STA</em> (group)
-&gt; <em>NET.STA.LOC.CHA_EVENTID_LABEL</em> (dataset)</p>
<p>The dataset is a byte string corresponding to JSON.</p>
<p>Sample JSON for a trace processing parameters dataset:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"baseline"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"polynomial_coefs"</span><span class="p">:</span> <span class="p">[</span>
      <span class="mf">-3.1244715639196995e-24</span><span class="p">,</span>
       <span class="mf">1.1046838180719736e-19</span><span class="p">,</span>
      <span class="mf">-1.2610591147149431e-15</span><span class="p">,</span>
       <span class="mf">4.223265643969671e-12</span><span class="p">,</span>
       <span class="mf">7.099592013855652e-09</span><span class="p">,</span>
       <span class="mi">0</span><span class="p">,</span>
       <span class="mi">0</span>
    <span class="p">]</span>
  <span class="p">},</span> 
  <span class="nt">"corner_frequencies"</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"snr"</span><span class="p">,</span> 
	  <span class="nt">"lowpass"</span><span class="p">:</span> <span class="mf">30.778610333622925</span><span class="p">,</span> 
	  <span class="nt">"highpass"</span><span class="p">:</span> <span class="mf">0.008053637150713472</span>
  <span class="p">},</span> 
  <span class="nt">"snr_conf"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"threshold"</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span> 
	<span class="nt">"min_freq"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span> 
  	<span class="nt">"bandwidth"</span><span class="p">:</span> <span class="mf">20.0</span><span class="p">,</span> 
    <span class="nt">"max_freq"</span><span class="p">:</span> <span class="mf">5.0</span>
  <span class="p">},</span> 
  <span class="nt">"signal_split"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"picker_type"</span><span class="p">:</span> <span class="s2">"travel_time"</span><span class="p">,</span> 
    <span class="nt">"method"</span><span class="p">:</span> <span class="s2">"p_arrival"</span><span class="p">,</span> 
    <span class="nt">"split_time"</span><span class="p">:</span> <span class="s2">"2019-07-06T03:20:46.346556Z"</span>
  <span class="p">},</span> 
  <span class="nt">"signal_end"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"vsplit"</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> 
	<span class="nt">"floor"</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> 
	<span class="nt">"epsilon"</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> 
	<span class="nt">"end_time"</span><span class="p">:</span> <span class="s2">"2019-07-06T03:23:09.315515Z"</span><span class="p">,</span> 
	<span class="nt">"model"</span><span class="p">:</span> <span class="s2">"AS16"</span><span class="p">,</span> 
	<span class="nt">"method"</span><span class="p">:</span> <span class="s2">"model"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="stream-processing-parameters">
<h3>Stream Processing Parameters<a class="headerlink" href="#stream-processing-parameters" title="Permalink to this headline">¶</a></h3>
<p>Stream processing parameters are the parameters for the algorithms
used in processing involving multiple channels for a station for a
given earthquake. This information is primarily intended for
reproducibility.</p>
<div class="section" id="stream-processing-parameters-hierarchy">
<h4>Stream Processing Parameters Hierarchy<a class="headerlink" href="#stream-processing-parameters-hierarchy" title="Permalink to this headline">¶</a></h4>
<p>Following the ASDF layout for waveforms, the
hierarchy is</p>
<p><code class="docutils literal notranslate"><span class="pre">StreamProcessingParameters</span></code> (group) -&gt; <em>NET.STA</em> (group)
-&gt; <em>NET.STA.LOC.INST_EVENTID_LABEL</em> (dataset)</p>
<p>The dataset is a byte string corresponding to JSON like the
<code class="docutils literal notranslate"><span class="pre">TraceProcessingParameters</span></code>.</p>
</div>
</div>
<div class="section" id="cache">
<h3>Cache<a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Cache</span></code> includes intermediate results that are not readily
available or quickly reproduced from the waveform data, such as the
noise and signal spectra. The layout of this group may change and/or
the group may become obsolete (e.g., if the values are computed on
demand rather than stored).</p>
<p>The values that are stored in the <code class="docutils literal notranslate"><span class="pre">Cache</span></code> include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SignalSpectrumFreq</span></code> Frequency for the signal spectrum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SignalSpectrumSpec</span></code> Amplitude of the signal spectrum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NoiseSpectrumFreq</span></code> Frequency for the signal spectrum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NoiseSpectrumSpec</span></code> Amplitude of the signal spectrum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SmoothSignalSpectrumFreq</span></code> Frequency for the signal spectrum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SmoothSignalSpectrumSpec</span></code> Amplitude of the signal spectrum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SmoothNoiseSpectrumFreq</span></code> Frequency for the signal spectrum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SmoothNoiseSpectrumSpec</span></code> Amplitude of the signal spectrum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SnrFreq</span></code> Frequency for the signal-to-noise ratio.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SnrSnr</span></code> Value of the signal-to-noise ratio.</p></li>
</ul>
<div class="section" id="cache-hierarchy">
<h4>Cache Hierarchy<a class="headerlink" href="#cache-hierarchy" title="Permalink to this headline">¶</a></h4>
<p>The hierarchy for all of the datasets is the same and is of the form:</p>
<p><code class="docutils literal notranslate"><span class="pre">Cache</span></code> (group) -&gt; <code class="docutils literal notranslate"><span class="pre">SignalSpectrumFreq</span></code> (group) -&gt; <em>NET.STA</em> (group)
-&gt; <em>NET.STA.LOC.CHA_EVENTID_LABEL</em> (dataset)</p>
<p>The dataset is a multidimensional float array.</p>
</div>
</div>
<div class="section" id="surface-waveforms-potential-future-addition">
<h3>Surface Waveforms (potential future addition)<a class="headerlink" href="#surface-waveforms-potential-future-addition" title="Permalink to this headline">¶</a></h3>
<p><strong>Use case</strong>: Output from ground-motion simulations.</p>
<p><strong>Status</strong>: Under discussion.</p>
<p>Output from seismic wave propagation simulations often include the
waveform time histories on the ground surface or vertical slices. This
auxiliary data group would provide a standard layout for specifying
the topology of the surface and the time histories on that surface.</p>
</div>
<div class="section" id="rupture-models-potential-future-addition">
<h3>Rupture Models (potential future addition)<a class="headerlink" href="#rupture-models-potential-future-addition" title="Permalink to this headline">¶</a></h3>
<p><strong>Use case</strong>: Finite-source rupture models from inversions of real
earthquakes and scenario (hypothetical) earthquakes.</p>
<p><strong>Status</strong>: Under discussion.</p>
<p>In order to compute station metrics associated with finite-source
models, we need to have access to the finite-source models. Thus, it
would be useful to include them in the ground-motion processing
workspace. This would allow the provenance information to track
updates to a finite-source model as well as alternative finite-source
models for an earthquake.</p>
<p>Additionally, the earthquake rupture model is an important descriptive
feature for scenario (hypothetical) earthquakes. Not only is it useful
to have the finite-source description for computing station metrics,
etc, but we often usually also have multiple realizations that differ
in ways that are not easily described by basic parameters such as
magnitude and hypocenter. Examples include variations in rupture speed
and spatial variation in slip.</p>
</div>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../getting-started/install.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Installation</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="features.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Features</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2020, USGS
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/overview/workspace.md.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Workspace</a><ul>
<li><a class="reference internal" href="#nomenclature">Nomenclature</a></li>
<li><a class="reference internal" href="#extension-of-asdf-hdf-5-layout">Extension of ASDF HDF-5 Layout</a><ul>
<li><a class="reference internal" href="#waveform-metrics">Waveform Metrics</a><ul>
<li><a class="reference internal" href="#waveform-metrics-hierarchy">Waveform Metrics Hierarchy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#station-metrics">Station Metrics</a><ul>
<li><a class="reference internal" href="#station-metrics-hierarchy">Station Metrics Hierarchy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#trace-processing-parameters">Trace Processing Parameters</a><ul>
<li><a class="reference internal" href="#trace-processing-parameters-hierarchy">Trace Processing Parameters Hierarchy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stream-processing-parameters">Stream Processing Parameters</a><ul>
<li><a class="reference internal" href="#stream-processing-parameters-hierarchy">Stream Processing Parameters Hierarchy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cache">Cache</a><ul>
<li><a class="reference internal" href="#cache-hierarchy">Cache Hierarchy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#surface-waveforms-potential-future-addition">Surface Waveforms (potential future addition)</a></li>
<li><a class="reference internal" href="#rupture-models-potential-future-addition">Rupture Models (potential future addition)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
  </body>
</html>