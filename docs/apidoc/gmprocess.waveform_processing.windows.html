<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="gmprocess.waveform_processing.zero_crossings" href="gmprocess.waveform_processing.zero_crossings.html" /><link rel="prev" title="gmprocess.waveform_processing.spectrum" href="gmprocess.waveform_processing.spectrum.html" />

    <meta name="generator" content="sphinx-3.4.0, furo 2020.12.28.beta22"/>
        <title>gmprocess.waveform_processing.windows - gmprocess 1.0.4 documentation</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=d315feae89b83a5365ff3ccc3644a1018972e3a0">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=26485485040e7aaf717c13fd0188a5ad2c2deb60">
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script defer="defer" src="../_static/jquery.js"></script>
    <script defer="defer" src="../_static/underscore.js"></script>
    <script defer="defer" src="../_static/doctools.js"></script>
    <script defer src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<div class="announcement">
  <aside class="announcement-content">
     <a href='https://github.com/usgs/groundmotion-processing' style='text-decoration: none'><h1>Ground-motion Processing Software</h1></a> 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">gmprocess 1.0.4 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/gmprocess_logo.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Objective</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html#motivation">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html#target-use-cases">Target Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/workspace.html">Workspace</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/running.html">Running the code</a></li>
</ul>
<p class="caption"><span class="caption-text">Processing Steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/reading.html">Reading data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/retrieve.html">Retrieving data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/windowing.html">Windowing data</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../processing-steps/index.html">Waveform processing</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing.html">Waveform Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing/initial-qc.html">Initial quality control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing/remove-response.html">Removing instrument response</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing/phase-pickers.html">Phase pickers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing/baseline-correction.html">Baseline correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing-steps/waveform-processing/filtering.html">Filtering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/data-units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/waveform-metrics.html">Waveform metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing-steps/station-metrics.html">Station metrics</a></li>
</ul>
<p class="caption"><span class="caption-text">Using gmprocess</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gmprocess/gmprocess.html">The gmprocess command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gmprocess/reading.html">Reading data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gmprocess/waveform-processing.html">Waveform processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gmprocess/reports.html">Processing reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gmprocess/exporting.html">Exporting data</a></li>
</ul>
<p class="caption"><span class="caption-text">Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../utilities/gmworkspace.html">The gmworkspace command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/gmconvert.html">Converting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/matlab.html">Matlab utilities</a></li>
</ul>
<p class="caption"><span class="caption-text">Python Scripting</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../scripting/index.html">Data structures</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../scripting/data-structures.html">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripting/data-structures/station-trace.html">StationTrace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripting/data-structures/station-stream.html">StationStream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scripting/data-structures/stream-collection.html">StreamCollection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/scripting.html">Writing Python scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/waveform-metrics.html">Waveform metrics</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../developer/code-layout.html">Code layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/readers.html">Adding new data readers</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="gmprocess.html">API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="gmprocess.core.html">gmprocess.core</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.core.stationstream.html">gmprocess.core.stationstream</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.core.stationtrace.html">gmprocess.core.stationtrace</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.core.streamcollection.html">gmprocess.core.streamcollection</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="gmprocess.io.html">gmprocess.io</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.io.catalog.html">gmprocess.io.catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.io.fetcher.html">gmprocess.io.fetcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.io.global_fetcher.html">gmprocess.io.global_fetcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.io.nga.html">gmprocess.io.nga</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.io.read.html">gmprocess.io.read</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.io.read_directory.html">gmprocess.io.read_directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.io.report.html">gmprocess.io.report</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.io.seedname.html">gmprocess.io.seedname</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.io.stream.html">gmprocess.io.stream</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.io.utils.html">gmprocess.io.utils</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="gmprocess.utils.html">gmprocess.utils</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.utils.args.html">gmprocess.utils.args</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.utils.config.html">gmprocess.utils.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.utils.event.html">gmprocess.utils.event</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.utils.exception.html">gmprocess.utils.exception</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.utils.logging.html">gmprocess.utils.logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.utils.models.html">gmprocess.utils.models</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.utils.plot.html">gmprocess.utils.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.utils.tables.html">gmprocess.utils.tables</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="gmprocess.waveform_processing.html">gmprocess.waveform_processing</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.adjust_highpass.html">gmprocess.waveform_processing.adjust_highpass</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.corner_frequencies.html">gmprocess.waveform_processing.corner_frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.fft.html">gmprocess.waveform_processing.fft</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.filtering.html">gmprocess.waveform_processing.filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.nn_quality_assurance.html">gmprocess.waveform_processing.nn_quality_assurance</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.phase.html">gmprocess.waveform_processing.phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.pretesting.html">gmprocess.waveform_processing.pretesting</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.processing.html">gmprocess.waveform_processing.processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.snr.html">gmprocess.waveform_processing.snr</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.spectrum.html">gmprocess.waveform_processing.spectrum</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">gmprocess.waveform_processing.windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmprocess.waveform_processing.zero_crossings.html">gmprocess.waveform_processing.zero_crossings</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="module-gmprocess.waveform_processing.windows">
<span id="gmprocess-waveform-processing-windows"></span><h1>gmprocess.waveform_processing.windows<a class="headerlink" href="#module-gmprocess.waveform_processing.windows" title="Permalink to this headline">¶</a></h1>
<p>Helper functions for windowing singal and noise in a trace.</p>
<dl class="py function">
<dt id="gmprocess.waveform_processing.windows.cut">
<code class="sig-prename descclassname">gmprocess.waveform_processing.windows.</code><code class="sig-name descname">cut</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">sec_before_split</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmprocess/waveform_processing/windows.html#cut"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmprocess.waveform_processing.windows.cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Cut/trim the record.</p>
<p>This method minimally requires that the windows.signal_end method has been
run, in which case the record is trimmed to the end of the signal that
was estimated by that method.</p>
<p>To trim the beginning of the record, the sec_before_split must be
specified, which uses the noise/signal split time that was estiamted by the
windows.signal_split mehtod.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<a class="reference internal" href="gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream" title="gmprocess.core.stationstream.StationStream"><em>StationStream</em></a>) – Stream of data.</p></li>
<li><p><strong>sec_before_split</strong> (<em>float</em>) – Seconds to trim before split. If None, then the beginning of the
record will be unchanged.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>cut streams.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>stream</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="gmprocess.waveform_processing.windows.signal_end">
<code class="sig-prename descclassname">gmprocess.waveform_processing.windows.</code><code class="sig-name descname">signal_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">event_time</span></em>, <em class="sig-param"><span class="n">event_lon</span></em>, <em class="sig-param"><span class="n">event_lat</span></em>, <em class="sig-param"><span class="n">event_mag</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">vmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">floor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">model</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">epsilon</span><span class="o">=</span><span class="default_value">2.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmprocess/waveform_processing/windows.html#signal_end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmprocess.waveform_processing.windows.signal_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate end of signal by using a model of the 5-95% significant
duration, and adding this value to the “signal_split” time. This probably
only works well when the split is estimated with a p-wave picker since
the velocity method often ends up with split times that are well before
signal actually starts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<a class="reference internal" href="gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream" title="gmprocess.core.stationstream.StationStream"><em>StationStream</em></a>) – Stream of data.</p></li>
<li><p><strong>event_time</strong> (<em>UTCDateTime</em>) – Event origin time.</p></li>
<li><p><strong>event_mag</strong> (<em>float</em>) – Event magnitude.</p></li>
<li><p><strong>event_lon</strong> (<em>float</em>) – Event longitude.</p></li>
<li><p><strong>event_lat</strong> (<em>float</em>) – Event latitude.</p></li>
<li><p><strong>method</strong> (<em>str</em>) – Method for estimating signal end time. Either ‘velocity’
or ‘model’.</p></li>
<li><p><strong>vmin</strong> (<em>float</em>) – Velocity (km/s) for estimating end of signal. Only used if
method=”velocity”.</p></li>
<li><p><strong>floor</strong> (<em>float</em>) – Minimum duration (sec) applied along with vmin.</p></li>
<li><p><strong>model</strong> (<em>str</em>) – Short name of duration model to use. Must be defined in the
gmprocess/data/modules.yml file.</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – Number of standard deviations; if epsilon is 1.0, then the signal
window duration is the mean Ds + 1 standard deviation. Only used
for method=”model”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>trace with stats dict updated to include a
stats[‘processing_parameters’][‘signal_end’] dictionary.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="gmprocess.waveform_processing.windows.signal_split">
<code class="sig-prename descclassname">gmprocess.waveform_processing.windows.</code><code class="sig-name descname">signal_split</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">origin</span></em>, <em class="sig-param"><span class="n">model</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">picker_config</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">config</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmprocess/waveform_processing/windows.html#signal_split"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmprocess.waveform_processing.windows.signal_split" title="Permalink to this definition">¶</a></dt>
<dd><p>This method tries to identifies the boundary between the noise and signal
for the waveform. The split time is placed inside the
‘processing_parameters’ key of the trace stats.</p>
<p>The P-wave arrival is used as the split between the noise and signal
windows. Multiple picker methods are suppored and can be configured in the
config file
‘~/.gmprocess/picker.yml</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<a class="reference internal" href="gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream" title="gmprocess.core.stationstream.StationStream"><em>StationStream</em></a>) – Stream of data.</p></li>
<li><p><strong>origin</strong> (<a class="reference internal" href="gmprocess.utils.event.html#gmprocess.utils.event.ScalarEvent" title="gmprocess.utils.event.ScalarEvent"><em>ScalarEvent</em></a>) – ScalarEvent object.</p></li>
<li><p><strong>model</strong> (<em>TauPyModel</em>) – TauPyModel object for computing travel times.</p></li>
<li><p><strong>picker_config</strong> (<em>dict</em>) – Dictionary containing picker configuration information.</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – Dictionary containing system configuration information.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>trace with stats dict updated to include a
stats[‘processing_parameters’][‘signal_split’] dictionary.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="gmprocess.waveform_processing.windows.trim_multiple_events">
<code class="sig-prename descclassname">gmprocess.waveform_processing.windows.</code><code class="sig-name descname">trim_multiple_events</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">origin</span></em>, <em class="sig-param"><span class="n">catalog</span></em>, <em class="sig-param"><span class="n">travel_time_df</span></em>, <em class="sig-param"><span class="n">pga_factor</span></em>, <em class="sig-param"><span class="n">pct_window_reject</span></em>, <em class="sig-param"><span class="n">gmpe</span></em>, <em class="sig-param"><span class="n">site_parameters</span></em>, <em class="sig-param"><span class="n">rupture_parameters</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmprocess/waveform_processing/windows.html#trim_multiple_events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmprocess.waveform_processing.windows.trim_multiple_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses a catalog (list of ScalarEvents) to handle cases where a trace might
contain signals from multiple events. The catalog should contain events
down to a low enough magnitude in relation to the events of interest.
Overall, the algorithm is as follows:</p>
<ol class="arabic simple">
<li><p>For each earthquake in the catalog, get the P-wave travel time
and estimated PGA at this station.</p></li>
<li><p>Compute the PGA (of the as-recorded horizontal channels).</p></li>
<li><p>Select the P-wave arrival times across all events for this record
that are (a) within the signal window, and (b) the predicted PGA is
greater than pga_factor times the PGA from step #1.</p></li>
<li><p>If any P-wave arrival times match the above criteria, then if any of
the arrival times fall within in the first pct_window_reject*100%
of the signal window, then reject the record. Otherwise, trim the
record such that the end time does not include any of the arrivals
selected in step #3.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<a class="reference internal" href="gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream" title="gmprocess.core.stationstream.StationStream"><em>StationStream</em></a>) – Stream of data.</p></li>
<li><p><strong>origin</strong> (<a class="reference internal" href="gmprocess.utils.event.html#gmprocess.utils.event.ScalarEvent" title="gmprocess.utils.event.ScalarEvent"><em>ScalarEvent</em></a>) – ScalarEvent object associated with the StationStream.</p></li>
<li><p><strong>catalog</strong> (<em>list</em>) – List of ScalarEvent objects.</p></li>
<li><p><strong>travel_time_df</strong> (<em>DataFrame</em>) – A pandas DataFrame that contains the travel time information
(obtained from gmprocess.waveform_processing.phase.create_travel_time_dataframe).
The columns in the DataFrame are the station ids and the indices
are the earthquake ids.</p></li>
<li><p><strong>pga_factor</strong> (<em>float</em>) – A decimal factor used to determine whether the predicted PGA
from an event arrival is significant enough that it should be
considered for removal.</p></li>
<li><p><strong>pct_window_reject</strong> (<em>float</em>) – A decimal from 0.0 to 1.0 used to determine if an arrival should
be trimmed from the record, or if the entire record should be
rejected. If the arrival falls within the first
pct_window_reject * 100% of the signal window, then the entire
record will be rejected. Otherwise, the record will be trimmed
appropriately.</p></li>
<li><p><strong>gmpe</strong> (<em>str</em>) – Short name of the GMPE to use. Must be defined in the modules file.</p></li>
<li><p><strong>site_parameters</strong> (<em>dict</em>) – Dictionary of site parameters to input to the GMPE.</p></li>
<li><p><strong>rupture_parameters</strong> – Dictionary of rupture parameters to input to the GMPE.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Processed stream.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream" title="gmprocess.core.stationstream.StationStream">StationStream</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="gmprocess.waveform_processing.windows.window_checks">
<code class="sig-prename descclassname">gmprocess.waveform_processing.windows.</code><code class="sig-name descname">window_checks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st</span></em>, <em class="sig-param"><span class="n">min_noise_duration</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">min_signal_duration</span><span class="o">=</span><span class="default_value">5.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmprocess/waveform_processing/windows.html#window_checks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmprocess.waveform_processing.windows.window_checks" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the split/end windowing have long enough durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st</strong> (<a class="reference internal" href="gmprocess.core.stationstream.html#gmprocess.core.stationstream.StationStream" title="gmprocess.core.stationstream.StationStream"><em>StationStream</em></a>) – Stream of data.</p></li>
<li><p><strong>min_noise_duration</strong> (<em>float</em>) – Minimum duration of noise window (sec).</p></li>
<li><p><strong>min_signal_duration</strong> (<em>float</em>) – Minimum duration of signal window (sec).</p></li>
</ul>
</dd>
</dl>
</dd></dl>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="gmprocess.waveform_processing.zero_crossings.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">gmprocess.waveform_processing.zero_crossings</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="gmprocess.waveform_processing.spectrum.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">gmprocess.waveform_processing.spectrum</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2020, USGS
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/apidoc/gmprocess.waveform_processing.windows.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </main>
</div>
  </body>
</html>